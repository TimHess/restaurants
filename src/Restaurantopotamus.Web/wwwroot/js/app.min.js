function RatingController(n,t,i){this.rate=function(n){t.post("/api/rating",{value:n,restaurantId:this.restaurantId}).then(function(){i.success("Rating received!")},function(){})}}function RestaurantController(n,t,i){n.loading=!0;n.addOrEdit=!1;t.get("/api/restaurant").then(function(t){n.Restaurants=t.data;n.loading=!1},function(){n.loading=!1});n.add=function(){n.addOrEdit=!0;n.addEditButtonText="Add Restaurant";n.restaurant={name:null,cuisineType:null,id:null}};n.tryadd=function(r){t.post("/api/restaurant/",{name:r.name,cuisineType:r.cuisineType},{headers:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).token}}).then(function(t){i.success("R has been updated".replace("R",r.name),"Restaurant added!");n.Restaurants.push(t.data);n.addOrEdit=!1},function(n){n.status==401?alert("Sorry, you're not authorized to do that"):alert("Sorry, something went wrong")})};n.edit=function(t){n.addOrEdit=!0;n.addEditButtonText="Edit Restaurant";n.restaurant={name:t.name,cuisineType:t.cuisineType,id:t.id};n.saved=t};n.tryedit=function(r){t.put("/api/restaurant/",{id:r.id,name:r.name,cuisineType:r.cuisineType},{headers:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).token}}).then(function(){i.success("R has been updated".replace("R",r.name),"Restaurant updated!");n.saved.name=n.restaurant.name;n.saved.cuisineType=n.restaurant.cuisineType;n.addOrEdit=!1},function(n){n.status==401?alert("Sorry, you're not authorized to do that"):alert("Sorry, something went wrong")})};n.submitForm=function(t){t.id?n.tryedit(t):n.tryadd(t)};n.remove=function(n){confirm("Are you sure? You will not be able to undo this action!")&&t.delete("/api/restaurant/"+n,{headers:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).token}}).then(function(){var t=document.getElementById("r"+n);t.parentNode.removeChild(t)},function(n){n.status==401?alert("Sorry, you're not authorized to do that"):alert("Sorry, something went wrong")})};n.cancel=function(){n.addOrEdit=!1}}angular.module("app.Hippo",["ngAnimate","toastr"]);angular.module("app.Hippo").controller("RatingController",RatingController);RatingController.$inject=["$scope","$http","toastr"];angular.module("app.Hippo").controller("RestaurantController",RestaurantController);RestaurantController.$inject=["$scope","$http","toastr"];